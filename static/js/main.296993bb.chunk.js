(this["webpackJsonpbook-management-app"]=this["webpackJsonpbook-management-app"]||[]).push([[0],{22:function(e,t,c){},29:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),s=c(15),i=c.n(s),r=(c(22),c(4)),o=c(0),j=function(){return Object(o.jsxs)("div",{className:"navbar",children:[Object(o.jsxs)("div",{className:"header",children:[Object(o.jsxs)(r.b,{to:"/",children:[" ",Object(o.jsx)("i",{className:"fas fa-book"})]}),Object(o.jsx)("h2",{children:Object(o.jsx)(r.b,{to:"/",children:"Books Management System"})})]}),Object(o.jsx)("div",{style:{marginLeft:"auto"}}),Object(o.jsx)("div",{className:"navbar-content",children:Object(o.jsx)(r.b,{to:"/",children:"Home"})}),Object(o.jsx)("div",{className:"navbar-content",children:Object(o.jsx)(r.b,{to:"/pricing",children:"Pricing"})}),Object(o.jsx)("div",{className:"navbar-content",children:Object(o.jsx)(r.b,{to:"/contact",children:"Contact Us"})})]})},l=function(){return Object(o.jsxs)("div",{className:"blocks",children:[Object(o.jsxs)("div",{className:"block-1",children:[Object(o.jsx)("p",{children:"Creator: Mayank Bist"}),Object(o.jsx)("h1",{children:"Manage Books"}),Object(o.jsxs)("div",{className:"button-group",children:[Object(o.jsx)("button",{className:"btn",children:Object(o.jsx)(r.b,{to:"/user",children:"Enter As User"})}),Object(o.jsx)("button",{className:"btn",children:Object(o.jsx)(r.b,{to:"/admin",children:"Enter As Admin"})})]})]}),Object(o.jsx)("div",{className:"block-2",children:Object(o.jsx)("img",{className:"landing-logo",src:"https://raw.githubusercontent.com/mayankbist45/Single_Page_Web_Template/main/assets/header-img.png",alt:"Book Cover"})})]})},b=c(5),d=function(e){var t=Object(n.useState)(null),c=Object(b.a)(t,2),a=c[0],s=c[1],i=Object(n.useState)(!0),r=Object(b.a)(i,2),o=r[0],j=r[1],l=Object(n.useState)(null),d=Object(b.a)(l,2),h=d[0],u=d[1];return Object(n.useEffect)((function(){var t=new AbortController;return setTimeout((function(){fetch(e,{signal:t.signal}).then((function(e){if(!e.ok)throw Error("Could Not fetch the data for that resource");return e.json()})).then((function(e){s(e),j(!1),u(null)})).catch((function(e){"AbortError"===e.name?console.log("fetch aborted"):(u(e.message),j(!1))}))}),1e3),function(){return t.abort()}}),[e]),{data:a,isPending:o,error:h}},h="https://broadleaf-pale-mercury.glitch.me/books",u=function(e){var t=e.book,c=t.title,n=t.yop,a=t.author,s=t.availableCopies,i=e.book,r=function(){i.availableCopies=Math.max(0,i.availableCopies-1),0===i.availableCopies?fetch(h+"/"+i.id,{method:"DELETE"}).then(e.updateTable):fetch(h+"/"+i.id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(e.updateTable)};return Object(o.jsxs)("div",{className:"book-container",children:[Object(o.jsxs)("div",{className:"book-heading",children:[Object(o.jsx)("h1",{children:c}),Object(o.jsxs)("p",{children:["Written By : ",a]})]}),Object(o.jsx)("hr",{}),Object(o.jsxs)("div",{className:"book-details",children:[Object(o.jsxs)("p",{className:"text-mute",children:["Year Of Publication: ",n]}),Object(o.jsxs)("p",{className:"text-mute",children:[" Available Copies: ",s]})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{className:"button-buy",onClick:function(){i.timesBought++,r(),e.updateBooks()},children:"Issue this book"})})]})},O="https://broadleaf-pale-mercury.glitch.me/books",x=function(){var e=d(O),t=e.data,c=e.isPending,a=Object(n.useState)([]),s=Object(b.a)(a,2),i=s[0],j=s[1];Object(n.useEffect)((function(){t&&(t.sort((function(e,t){return t.timesBought-e.timesBought})),j(t.slice(0,4)))}),[t]);var l=function(){fetch(O).then((function(e){return e.json()})).then((function(e){e.sort((function(e,t){return t.timesBought-e.timesBought})),j(e.slice(0,4))}))};return Object(o.jsx)("div",{children:Object(o.jsxs)("div",{className:"container",children:[Object(o.jsxs)("div",{className:"container-1",children:[Object(o.jsx)("p",{children:"We have handpicked some of the best books for you."}),Object(o.jsx)("h1",{children:"Our Top Picks"}),Object(o.jsx)("button",{className:"btn",children:Object(o.jsx)(r.b,{to:"/search/user",children:"SEARCH YOUR FAVOURITE BOOKS"})})]}),Object(o.jsxs)("div",{className:"container-2",children:[c&&Object(o.jsx)("h2",{children:"Loading..."}),!c&&i.map((function(e){return Object(o.jsx)(u,{book:e,updateBooks:l},e.id)}))]})]})})},m=function(){return Object(o.jsxs)("div",{className:"container",children:[Object(o.jsxs)("div",{className:"container-1",id:"admin-container",children:[Object(o.jsx)("p",{children:"ADD OR MODIFY THE BOOKS DATABASE SEAMLESSLY"}),Object(o.jsx)("h1",{children:"Welcome to the admin Panel"}),Object(o.jsx)("button",{className:"btn",children:Object(o.jsx)(r.b,{to:"/search/admin",children:"Explore The Database"})}),Object(o.jsx)("button",{className:"btn",children:Object(o.jsx)(r.b,{to:"/add",children:"Add More Books"})})]}),Object(o.jsx)("div",{className:"container-2"})]})},p=function(){return Object(o.jsxs)("div",{className:"not-found",children:[Object(o.jsx)("h1",{children:"Lost SomeWhere?"}),Object(o.jsx)("button",{className:"btn",children:Object(o.jsx)(r.b,{to:"/",children:"Back to the HomePage..."})})]})},f=c(2),v="https://broadleaf-pale-mercury.glitch.me/books",N=function(e){var t=e.book,c=e.user,n=function(){t.availableCopies=Math.max(0,t.availableCopies-1),0===t.availableCopies?fetch(v+t.id,{method:"DELETE"}).then(e.updateTable):fetch(v+t.id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e.updateTable)};return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:t.title}),Object(o.jsx)("td",{children:t.author}),Object(o.jsx)("td",{children:t.yop}),Object(o.jsx)("td",{children:Object(o.jsxs)("div",{className:"table-row-copy",children:["admin"===c&&Object(o.jsx)("button",{onClick:n,children:Object(o.jsx)("i",{className:"fas fa-minus"})}),t.availableCopies,"admin"===c&&Object(o.jsx)("button",{onClick:function(){t.availableCopies=t.availableCopies+1,fetch(v+t.id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e.updateTable)},children:Object(o.jsx)("i",{className:"fas fa-plus"})})]})}),"admin"===c&&Object(o.jsx)("td",{children:Object(o.jsx)("button",{className:"delete-record-button",onClick:function(){e.deleteItem(t.id)},children:"Delete"})}),"user"===c&&Object(o.jsx)("td",{children:Object(o.jsx)("button",{className:"delete-record-button",onClick:function(){t.timesBought++,n(),e.updateBooks()},children:"Issue Book"})})]})},g="https://broadleaf-pale-mercury.glitch.me/books",k=function(){var e=Object(f.f)().usertype,t=d(g),c=t.data,a=t.isPending,s=Object(n.useState)([]),i=Object(b.a)(s,2),r=i[0],j=i[1],l=Object(n.useState)(""),h=Object(b.a)(l,2),u=h[0],O=h[1],x=Object(n.useState)(""),m=Object(b.a)(x,2),p=m[0],v=m[1],k=Object(n.useState)(0),y=Object(b.a)(k,2),C=y[0],S=y[1],E=Object(n.useState)(9999),T=Object(b.a)(E,2),B=T[0],A=T[1],P=function(e){var t=[];return e.forEach((function(e){""!==p&&e.title.toUpperCase()!==p.toUpperCase()||""!==u&&e.author.toUpperCase()!==u.toUpperCase()||C<=e.yop&&B>=e.yop&&t.push(e)})),t},D=function(e){fetch(g+"/".concat(e),{method:"DELETE"}).then((function(){return fetch(g).then((function(e){return e.json()})).then((function(e){return j(P(e))}))}))},U=function(){fetch(g).then((function(e){return e.json()})).then((function(e){return j(P(e))}))};return Object(n.useEffect)((function(){j(c)}),[c]),Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{className:"search-bar-container",children:Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch(g).then((function(e){return e.json()})).then((function(e){j(P(e))}))},children:[Object(o.jsxs)("div",{className:"search-form",children:[Object(o.jsxs)("div",{className:"search-form-box",children:[Object(o.jsx)("label",{htmlFor:"authorName",children:"Author Name: "}),Object(o.jsx)("input",{type:"text",id:"authorName",value:u,onChange:function(e){return O(e.target.value)}})]}),Object(o.jsxs)("div",{className:"search-form-box",children:[Object(o.jsx)("label",{htmlFor:"startP",children:"Year of Publication Start: "}),Object(o.jsx)("input",{type:"number",id:"startP",value:C,onChange:function(e){return S(e.target.value)}})]}),Object(o.jsxs)("div",{className:"search-form-box",children:[Object(o.jsx)("label",{htmlFor:"startE",children:"Year of Publication End: "}),Object(o.jsx)("input",{type:"number",id:"startE",value:B,onChange:function(e){return A(e.target.value)}})]}),Object(o.jsxs)("div",{className:"search-form-box",children:[Object(o.jsx)("label",{htmlFor:"title",children:"Title: "}),Object(o.jsx)("input",{type:"text",id:"title",value:p,onChange:function(e){return v(e.target.value)}})]})]}),Object(o.jsx)("div",{className:"search-button-container",children:Object(o.jsx)("div",{children:Object(o.jsx)("button",{className:"search-button",children:"Search"})})})]})}),Object(o.jsxs)("div",{className:"container-2",children:[a&&Object(o.jsx)("h2",{children:"Loading..."}),!a&&Object(o.jsxs)("table",{className:"book-table",children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:"Title"}),Object(o.jsx)("th",{children:"Author Name"}),Object(o.jsx)("th",{children:"Year of Publication"}),Object(o.jsx)("th",{children:"Available Copies"}),"admin"===e&&Object(o.jsx)("th",{children:"Delete Record"}),"user"===e&&Object(o.jsx)("th",{children:"Issue Book"})]})}),Object(o.jsx)("tbody",{children:r.map((function(t){return Object(o.jsx)(N,{book:t,user:e,deleteItem:D,updateTable:U},t.id)}))})]})]})]})},y=function(){var e=Object(n.useState)(""),t=Object(b.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(""),i=Object(b.a)(s,2),r=i[0],j=i[1],l=Object(n.useState)(""),d=Object(b.a)(l,2),h=d[0],u=d[1],O=Object(n.useState)(""),x=Object(b.a)(O,2),m=x[0],p=x[1],f=Object(n.useState)(!1),v=Object(b.a)(f,2),N=v[0],g=v[1],k=function(e){e.preventDefault(),fetch("https://broadleaf-pale-mercury.glitch.me/books",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({author:c,title:r,yop:h,availableCopies:m,timesBought:0})}).then((function(){g(!0),setTimeout((function(){return g(!1)}),1e3)}))};return Object(o.jsx)("div",{className:"add-form",children:Object(o.jsxs)("div",{className:"form-container",children:[Object(o.jsx)("div",{children:Object(o.jsx)("h1",{children:"Enter the Details of New Record"})}),Object(o.jsx)("form",{onSubmit:k,children:Object(o.jsxs)("div",{className:"form-content",children:[Object(o.jsx)("div",{children:Object(o.jsx)("input",{type:"text",placeholder:"Author Name",required:!0,value:c,onChange:function(e){return a(e.target.value)}})}),Object(o.jsx)("div",{children:Object(o.jsx)("input",{type:"text",placeholder:"Title ",required:!0,value:r,onChange:function(e){return j(e.target.value)}})}),Object(o.jsx)("div",{children:Object(o.jsx)("input",{type:"number",placeholder:"Year Of Publication",required:!0,value:h,onChange:function(e){return u(e.target.value)}})}),Object(o.jsx)("div",{children:Object(o.jsx)("input",{type:"number",placeholder:"Available Copies",required:!0,value:m,onChange:function(e){return p(e.target.value)}})}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",onClick:k,children:"Add Record"})})]})}),N&&Object(o.jsx)("h1",{className:"record-add",children:"Record Added"})]})})};var C=function(){return Object(o.jsx)(r.a,{children:Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(j,{}),Object(o.jsxs)(f.c,{children:[Object(o.jsx)(f.a,{path:"/",exact:!0,children:Object(o.jsx)(l,{})}),Object(o.jsx)(f.a,{path:"/user",children:Object(o.jsx)(x,{})}),Object(o.jsx)(f.a,{path:"/admin",children:Object(o.jsx)(m,{})}),Object(o.jsx)(f.a,{path:"/search/:usertype",children:Object(o.jsx)(k,{})}),Object(o.jsx)(f.a,{path:"/add",children:Object(o.jsx)(y,{})}),Object(o.jsx)(f.a,{path:"*",children:Object(o.jsx)(p,{})})]})]})})};i.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(C,{})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.296993bb.chunk.js.map